# Watchy Configuration
#
# =============================================================================
# EIGENCLOUD TEE DEPLOYMENT
# =============================================================================
# In EigenCloud TEE, MNEMONIC is auto-injected by KMS (encrypted).
# Just set KEY_MODE=mnemonic or leave unset (auto-detected).
# All variables NOT ending with _PUBLIC are encrypted by TEE.
#
# For TLS/HTTPS with custom domain, run: ecloud compute app configure tls
# Then set APP_PORT and DOMAIN (see TLS section below).

# =============================================================================
# SERVER
# =============================================================================
# APP_PORT is used by EigenCloud TLS (Caddy proxy), PORT is the fallback
APP_PORT=8080
# PORT=8080  # Alternative if not using EigenCloud TLS

# =============================================================================
# CHAIN
# =============================================================================
# Default chain ID if not specified in request
# 8453 = Base, 1 = Ethereum, 84532 = Base Sepolia, 11155111 = Sepolia
DEFAULT_CHAIN_ID=8453

# Optional: Override default RPC URLs (falls back to built-in public RPCs)
# RPC_URL_BASE=https://your-base-rpc.com
# RPC_URL_ETHEREUM=https://your-eth-rpc.com
# RPC_URL_BASE_SEPOLIA=https://your-base-sepolia-rpc.com
# RPC_URL_SEPOLIA=https://your-sepolia-rpc.com

# =============================================================================
# STORAGE
# =============================================================================
# Redis URL for job persistence (optional, falls back to in-memory)
# REDIS_URL=redis://localhost:6379

# =============================================================================
# WALLET / SIGNING
# =============================================================================
# Watchy supports two key modes for signing reports and transactions:
#
# Mode 1: Direct private key (for local/traditional deployment)
#   KEY_MODE=private_key  (or auto-detected if PRIVATE_KEY is set)
#   PRIVATE_KEY=0x...
#
# Mode 2: Mnemonic (for EigenCloud TEE deployment)
#   KEY_MODE=mnemonic  (or auto-detected if MNEMONIC is set)
#   MNEMONIC is auto-injected by EigenCloud KMS at runtime
#   DERIVATION_INDEX=0  (optional, default: 0)
#
# If KEY_MODE is not set, Watchy auto-detects based on which env var exists.
# If neither is set, signing features are disabled.

# Option 1: Direct private key
# PRIVATE_KEY=0x...

# Option 2: Mnemonic (EigenCloud injects this automatically)
# MNEMONIC=word1 word2 ... word12
# DERIVATION_INDEX=0

# Explicit mode override (optional, auto-detects if not set)
# KEY_MODE=private_key  # or "mnemonic"

# =============================================================================
# REPORT STORAGE
# =============================================================================
# IPFS via Pinata (optional, legacy)
# IPFS_API_URL=https://api.pinata.cloud
# IPFS_API_KEY=your_pinata_jwt_token

# =============================================================================
# AUTHENTICATION
# =============================================================================
# API key for service-to-service authentication (optional)
# If set, all requests to /audit/* and /agents/* require X-API-Key header
# If not set, endpoints are open (no auth required)
# API_KEY=your-shared-secret-here

# =============================================================================
# EIGENCLOUD TLS (optional, for HTTPS with custom domain)
# =============================================================================
# Run: ecloud compute app configure tls
# This creates a Caddyfile for automatic Let's Encrypt certificates.
#
# DOMAIN=your-domain.com          # Your custom domain
# APP_PORT=8080                    # Must match the port above
# ACME_STAGING=true                # Use staging certs for testing (recommended first)
# ACME_FORCE_ISSUE=false           # Force certificate reissue
# ENABLE_CADDY_LOGS=true           # Enable Caddy debug logs

# =============================================================================
# LOGGING
# =============================================================================
RUST_LOG=info,watchy=debug
